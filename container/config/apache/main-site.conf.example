# main-site.conf

ServerAdmin you@example.com

ServerName localhost

Header always set X-Frame-Options "SAMEORIGIN"
Header always set X-Content-Type-Options "nosniff"

DirectoryIndex index.php index.html
AddDefaultCharset UTF-8

LoadModule rewrite_module modules/mod_rewrite.so

DocumentRoot "/var/www/app"
<Directory "/var/www/app">
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ index.php [QSA,L]

    <Files "favicon.ico">
        SetEnvIf Request_URI "^/favicon\.ico$" dontlog
        ErrorDocument 404 " "
    </Files>

    <Files "robots.txt">
        SetEnvIf Request_URI "^/robots\.txt$" dontlog
        ErrorDocument 404 " "
    </Files>

    <FilesMatch "^index\.php$">
        SetHandler "proxy:fcgi://127.0.0.1:9000/"
        Header unset X-Powered-By
    </FilesMatch>

    <FilesMatch "^\.((?!well-known).)*$">
        Require all denied
    </FilesMatch>

    ErrorDocument 404 /index.php
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>
